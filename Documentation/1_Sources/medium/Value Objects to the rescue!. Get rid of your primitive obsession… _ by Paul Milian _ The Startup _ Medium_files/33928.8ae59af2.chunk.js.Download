(self.webpackChunklite=self.webpackChunklite||[]).push([[33928],{73004:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var r=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var l=r.createElement("path",{d:"M4 7.33L10.03 14l.5.55.5-.55 5.96-6.6-.98-.9-5.98 6.6h1L4.98 6.45z",fillRule:"evenodd"});const o=function(e){return r.createElement("svg",i({width:21,height:21,viewBox:"0 0 21 21"},e),l)}},14856:(e,n,t)=>{"use strict";t.d(n,{Z:()=>u});var r=t(67294);function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var l=r.createElement("rect",{x:26.25,y:9.25,width:.5,height:6.5,rx:.25,strokeWidth:.5}),o=r.createElement("rect",{x:29.75,y:12.25,width:.5,height:6.5,rx:.25,transform:"rotate(90 29.75 12.25)",strokeWidth:.5}),s=r.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5",strokeLinecap:"round"}),a=r.createElement("path",{d:"M11.5 14.5L19 20l4-3",strokeLinecap:"round"});const u=function(e){return r.createElement("svg",i({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),l,o,s,a)}},82405:(e,n,t)=>{"use strict";t.d(n,{b3:()=>B,Iq:()=>D,MT:()=>Y,Fp:()=>Q});var r=t(63038),i=t.n(r),l=t(28655),o=t.n(l),s=t(71439),a=t(46829),u=t(67294),c=t(71230),d=t(25550),m=t(25267),b=t(67701),p=t(18733),v=t(26350),f=t(77355),w=t(93310),g=t(47230),E=t(73917),h=t(59699),S=t(20113),y=t(87691),V=t(18627),k=t(66411),_=t(14646),x=t(34135),C=t(43487),I=t(73004),O=t(50458),N=t(68216);function M(){var e=o()(["\n  mutation UnsubscribeCollectionEmailsMutation($id: ID!) {\n    unsubscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isSubscribedToEmails\n      }\n    }\n  }\n"]);return M=function(){return e},e}function P(){var e=o()(["\n  mutation SubscribeCollectionEmailsMutation($id: ID!) {\n    subscribeCollectionEmails(collectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isSubscribedToEmails\n      }\n    }\n  }\n"]);return P=function(){return e},e}function T(){var e=o()(["\n  mutation UnfollowCollectionMutation($id: ID!) {\n    unfollowCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isFollowing\n      }\n    }\n  }\n"]);return T=function(){return e},e}function U(){var e=o()(["\n  mutation FollowCollectionMutation($id: ID!) {\n    followCollection(targetCollectionId: $id) {\n      __typename\n      id\n      viewerEdge {\n        __typename\n        id\n        isFollowing\n      }\n    }\n  }\n"]);return U=function(){return e},e}function F(){var e=o()(["\n  fragment CollectionFollowButton_collection on Collection {\n    __typename\n    id\n    name\n    canToggleEmail\n    slug\n    ...collectionUrl_collection\n    ...SusiClickable_collection\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}function R(){var e=o()(["\n  fragment CollectionFollowButton_post on Post {\n    __typename\n    id\n  }\n"]);return R=function(){return e},e}var L="collectionFollowPopover",B=(0,s.Ps)(R()),D=(0,s.Ps)(F(),N.nf,v.Os),A="follow_card",j=function(e){var n=e.children,t=e.extraTopPadding,r=e.extraBottomPadding,i=e.padding,l=e.margin,o=e.borderTop;return u.createElement(f.x,{padding:i||"".concat(t?"20px":"5px"," 20px ").concat(r?"20px":"5px"," 20px"),margin:l,borderTop:o?"BASE_LIGHTER":"NONE"},n)},$=(0,s.Ps)(U()),z=(0,s.Ps)(T()),G=(0,s.Ps)(P()),W=(0,s.Ps)(M()),Y=function(e,n){var t=(0,a.useMutation)(z),r=i()(t,1)[0];return u.useCallback((function(){return r({variables:{id:e},optimisticResponse:{unfollowCollection:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isFollowing:!1}}}})}),[e])},H=function(e){return function(n){return e?{fill:n.baseColor.text.lighter,marginLeft:"2px",width:"18px",height:"auto",paddingBottom:"1px"}:{fill:"inherit",marginLeft:"6px"}}},Q=function(e){var n=e.buttonSize,t=e.buttonStyleFn,r=e.collection,l=e.isPopoverVisible,o=e.isToastVisible,s=e.post,O=e.simpleButton,N=e.simpleLink,M=e.isLinkStyle,P=e.susiEntry,T=e.width,U=e.preventParentClick,F=(0,_.I)(),R=(0,C.v9)((function(e){return e.config.authDomain})),B=(0,d.r)().viewerId,D=r&&r.name?r.name:"",A=(0,V.Av)(),z=(0,k.pK)(),Q=(0,b.gY)(r).viewerEdge,K=u.useState(!!l),X=i()(K,2),Z=X[0],ee=X[1],ne=u.useState(!!o),te=i()(ne,2),re=te[0],ie=te[1],le=function(e,n){var t=(0,a.useMutation)($),r=i()(t,1)[0];return u.useCallback((function(){return r({variables:{id:e},optimisticResponse:{followCollection:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isFollowing:!0}}}})}),[e])}(r.id,B),oe=Y(r.id,B),se=function(e,n){var t=(0,a.useMutation)(G),r=i()(t,1)[0];return u.useCallback((function(){return r({variables:{id:e},optimisticResponse:{subscribeCollectionEmails:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isSubscribedToEmails:!0}}}})}),[e])}(r.id,B),ae=function(e,n){var t=(0,a.useMutation)(W),r=i()(t,1)[0];return u.useCallback((function(){return r({variables:{id:e},optimisticResponse:{unsubscribeCollectionEmails:{__typename:"Collection",id:e,viewerEdge:{__typename:"CollectionViewerEdge",id:"collectionId:".concat(e,"-viewerId:").concat(n),isSubscribedToEmails:!1}}}})}),[e])}(r.id,B),ue=u.useCallback((function(){ee(!1)}),[]);u.useEffect((function(){return x.V6.on("scroll",ue),function(){x.V6.off("scroll",ue)}}),[ue]);var ce=u.useCallback((function(e){U&&e.preventDefault(),null!=Q&&Q.isFollowing||(A.event("collection.followed",{collectionId:r.id,followSource:z}),le()),ee(!0)}),[r,Q,U,z]),de=u.useCallback((function(e){U&&e.preventDefault(),A.event("collection.unfollowed",{collectionId:r.id,followSource:z}),oe(),ee(!1)}),[U,z]),me=u.useCallback((function(){ee(!1)}),[]),be=u.useCallback((function(e){A.event("client.action",{action:"toggle-subscribe-collection-emails",eventType:"click",classAttribute:"checkbox"}),e.target.checked?se():ae(),ie(!0)}),[]),pe=u.useCallback((function(){ie(!1)}),[]);if(O)return J(R,r,s,ce,de,n,t,Q);var ve=function(e){var n=e.children,t=e.buttonSize,i=void 0===t?"SMALL":t,l=e.buttonStyle,o=e.isPopoverVisible,a=e.linkStyle,c=void 0===a?null:a;return u.createElement(m.I,null,(function(e){return e?null!=c?u.createElement(w.r,{"aria-controls":L,"aria-expanded":o?"true":"false",onClick:ce,linkStyle:c},n):u.createElement(g.z,{"aria-controls":L,"aria-expanded":o?"true":"false",size:i,onClick:ce,buttonStyle:l,width:T},n):u.createElement(v.R9,{collection:r,buttonStyle:"STRONG",buttonWidth:T,linkStyle:"OBVIOUS",isButton:!M,buttonSize:i,operation:"register",actionUrl:q(R,r,s)||"",susiEntry:P},n)}))},fe=!(null==Q||!Q.isSubscribedToEmails),we=!(null==Q||!Q.isFollowing);return N?u.createElement(w.r,{onClick:we?de:ce},u.createElement(f.x,{display:"flex",flexDirection:"row"},we?"Unfollow publication":"Follow publication")):u.createElement(c.f,null,u.createElement(E.J,{ariaId:L,isVisible:!!Z,hide:me,popoverRenderFn:function(){return u.createElement(f.x,{width:"280px",display:"flex",flexDirection:"column"},u.createElement(j,{extraTopPadding:!0},u.createElement(S.X6,{scale:"XS"},"You‘re following ",D)),u.createElement(j,null,u.createElement(y.F,{scale:"M"},"You‘ll now see more stories from ",D," across Medium.")),r.canToggleEmail&&u.createElement(j,null,u.createElement(y.F,{scale:"M"},u.createElement("label",null,u.createElement(f.x,{display:"inline",marginRight:"5px"},u.createElement("input",{type:"checkbox",onChange:be,checked:fe})),"Receive emails from this publication"))),u.createElement(j,{extraBottomPadding:!0},u.createElement(y.F,{scale:"M"},u.createElement(w.r,{onClick:de,linkStyle:"OBVIOUS",inline:!0},"Unfollow publication"))))}},u.createElement(ve,{isPopoverVisible:!!Z,buttonStyle:we?"OBVIOUS":"STRONG",linkStyle:M?null!=Q&&Q.isFollowing?"SUBTLE":"OBVIOUS":null,buttonSize:n},u.createElement(f.x,{display:"flex",flexDirection:"row"},we?"Following":"Follow",we&&u.createElement("span",{className:F({marginBottom:M?null:"-6px",position:"relative"})},u.createElement(I.Z,{className:F(H(M))}))))),u.createElement(p.N8,null,u.createElement(h.F,{isVisible:!!re,hide:pe,duration:2e3},u.createElement(y.F,{scale:"M"},fe?"You‘ll now receive emails from ".concat(D,"."):"You‘ll no longer receive emails from ".concat(D,".")))))},q=function(e,n,t){return n.slug&&(t&&t.id?(0,O.TAb)(e,n.slug,t.id):(0,O.LlO)(e,n.slug))},J=function(e,n,t,r,i){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"REGULAR",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(e){return e?"STRONG":"OBVIOUS"},s=arguments.length>7?arguments[7]:void 0,a=!(null==s||!s.isFollowing),c=o(!!a);return u.createElement(m.I,null,(function(o){return o?u.createElement(g.z,{size:l,onClick:a?i:r,buttonStyle:c},a?"Following":"Follow"):u.createElement(v.R9,{collection:n,buttonStyle:"OBVIOUS",isButton:!0,buttonSize:"REGULAR",operation:"register",actionUrl:q(e,n,t)||"",susiEntry:A},a?"Following":"Follow")}))}},76107:(e,n,t)=>{"use strict";t.d(n,{b:()=>r});var r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MembershipUpsellModal_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},61279:(e,n,t)=>{"use strict";t.d(n,{DI:()=>I,nj:()=>O,oT:()=>T});var r=t(59713),i=t.n(r),l=t(63038),o=t.n(l),s=t(28655),a=t.n(s),u=t(82492),c=t.n(u),d=t(71439),m=t(46829),b=t(67294),p=t(25735),v=t(9354),f=t(75880),w=t(18627),g=t(66411),E=t(78285);function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){i()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(){var e=a()(["\n  mutation fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe($userId: ID!) {\n    fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe(userId: $userId) {\n      __typename\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function V(){var e=a()(["\n  mutation unsubscribeNewsletterV3($newsletterV3Id: ID!) {\n    unsubscribeNewsletterV3(newsletterV3Id: $newsletterV3Id)\n  }\n"]);return V=function(){return e},e}function k(){var e=a()(["\n  mutation subscribeNewsletterV3($newsletterV3Id: ID!, $shouldRecordConsent: Boolean) {\n    subscribeNewsletterV3(\n      newsletterV3Id: $newsletterV3Id\n      shouldRecordConsent: $shouldRecordConsent\n    )\n  }\n"]);return k=function(){return e},e}function _(){var e=a()(["\n  fragment useNewsletterV3Subscription_newsletterV3_viewerEdge on NewsletterV3 {\n    viewerEdge {\n      id\n      isSubscribed\n    }\n  }\n"]);return _=function(){return e},e}function x(){var e=a()(["\n  fragment useNewsletterV3Subscription_user on User {\n    id\n    username\n    newsletterV3 {\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function C(){var e=a()(["\n  fragment useNewsletterV3Subscription_newsletterV3 on NewsletterV3 {\n    id\n    type\n    slug\n    name\n    collection {\n      slug\n    }\n    user {\n      id\n      name\n      username\n      newsletterV3 {\n        id\n      }\n    }\n  }\n"]);return C=function(){return e},e}var I=(0,d.Ps)(C()),O=(0,d.Ps)(x(),I),N=((0,d.Ps)(_()),(0,d.Ps)(k())),M=(0,d.Ps)(V()),P=(0,d.Ps)(y(),I),T=function(e){var n=e.newsletterV3,t=e.creator,r=e.newsletterName,i=n||{},l=i.id,s=i.type,a=i.slug,u=i.collection,d=(null==n?void 0:n.user)||t,h=null!=r?r:null==n?void 0:n.name,y=b.useState(!1),V=o()(y,2),k=V[0],_=V[1],x=(0,v.T)({newsletterSlug:a,collectionSlug:null==u?void 0:u.slug,username:null==d?void 0:d.username}),C=x.viewerEdge,I=x.loading,T=(0,p.VB)({name:"enable_auto_follow_on_subscribe",placeholder:!1}),U=b.useState(!1),F=o()(U,2),R=F[0],L=F[1];b.useEffect((function(){L(!(null==C||!C.isSubscribed))}),[null==C?void 0:C.isSubscribed]);var B=(0,w.Av)(),D=(0,g.Qi)(),A=(0,E.w)();k&&B.event("newsletterV3.subscribe.error",{newsletterV3Id:l});var j=function(e,n,t){if(t){var r={id:"User:".concat(null==d?void 0:d.id),fragment:O,fragmentName:"useNewsletterV3Subscription_user"},i=e.readFragment(r);e.writeFragment(S(S({},r),{},{data:S(S({},i),{},{newsletterV3:t})}))}if(C){var l=e.readQuery({query:v.p,variables:{newsletterSlug:a,collectionSlug:null==u?void 0:u.slug,username:null==d?void 0:d.username}}),o=c()({},l,{newsletterV3:{viewerEdge:{isSubscribed:n}}});e.writeQuery({query:v.p,variables:{newsletterSlug:a||"",collectionSlug:null==u?void 0:u.slug,username:null==d?void 0:d.username},data:o})}if(n&&T){var s=e.readQuery({query:f.J4,variables:{userId:null==d?void 0:d.id}}),m=c()({},s,{user:{viewerEdge:{isFollowing:!0}}});e.writeQuery({query:f.J4,variables:{userId:(null==d?void 0:d.id)||""},data:m})}},$=(0,m.useMutation)(N,{onCompleted:function(e){var n=e.subscribeNewsletterV3;_(!n),n&&(B.event("newsletterV3.subscribeClicked",{newsletterV3Id:l,source:D}),L(!0))},update:function(e){j(e,!0)}}),z=o()($,1)[0],G=(0,m.useMutation)(M,{onCompleted:function(e){var n=e.unsubscribeNewsletterV3;_(!n),n&&(L(!1),A({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_UNSUBSCRIBE",extraParams:{newsletterName:h||null,newsletterType:s||null,unsubscribeFn:function(){return L(!1)}}}))},update:function(e){j(e,!1)}}),W=o()(G,1)[0],Y=(0,m.useMutation)(P,{onCompleted:function(e){var n=e.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe;_(!n),n&&(B.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.id,source:D}),L(!0))},update:function(e,n){var t,r=S({},null===(t=n.data)||void 0===t?void 0:t.fetchOrLazilyCreateNewsletterV3AndMaybeSubscribe);j(e,!0,r)}}),H=o()(Y,1)[0];return{isSubscribed:R,hasError:k,setSubscribe:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_(!1),e&&!n&&null!=t&&t.id?H({variables:{userId:null==t?void 0:t.id}}):e&&null!=n&&n.id?z({variables:{newsletterV3Id:null==n?void 0:n.id,shouldRecordConsent:r}}):null!=n&&n.id?W({variables:{newsletterV3Id:null==n?void 0:n.id}}):_(!0)},loading:I}}},9354:(e,n,t)=>{"use strict";t.d(n,{T:()=>a,p:()=>u});var r=t(28655),i=t.n(r),l=t(46829),o=t(71439);function s(){var e=i()(["\n  query NewsletterV3ViewerEdge($newsletterSlug: ID!, $collectionSlug: ID, $username: ID) {\n    newsletterV3(\n      newsletterSlug: $newsletterSlug\n      collectionSlug: $collectionSlug\n      username: $username\n    ) {\n      ... on NewsletterV3 {\n        id\n        viewerEdge {\n          id\n          isSubscribed\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var a=function(e){var n,t=e.newsletterSlug,r=void 0===t?"":t,i=e.collectionSlug,o=e.username,s=(0,l.useQuery)(u,{variables:{newsletterSlug:r,collectionSlug:i,username:o},ssr:!1,skip:!r&&!o}),a=s.loading,c=s.error,d=s.data;return a?{loading:a}:c?{error:c}:{viewerEdge:null==d||null===(n=d.newsletterV3)||void 0===n?void 0:n.viewerEdge}},u=(0,o.Ps)(s())},27927:(e,n,t)=>{"use strict";t.d(n,{X:()=>le,w:()=>oe});var r=t(28655),i=t.n(r),l=t(63038),o=t.n(l),s=t(71439),a=t(67294),u=t(46829),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUserPostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userUpdatePostSubscribeMembershipUpsellShownAt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"postSubscribeMembershipUpsellShownAt"}}]}}]}}]},d=t(25735),m=t(6443),b=t(84531),p=t(13791),v=t(77355),f=t(8126),w=t(87691),g=t(18627),E=t(66411),h=t(43487),S=t(87498),y=t(78870),V=t(50458),k="after_subscribe_membership_upsell",_=function(e){var n=e.user,t=e.isVisible,r=e.hide,i=(0,h.v9)((function(e){return e.config.authDomain})),l=(0,g.Av)(),s=(0,m.H)(),_=s.value,x=s.loading,C=!!(0,d.VB)({name:"enable_referred_memberships",placeholder:!1});a.useEffect((function(){var e;x||null!=_&&_.postSubscribeMembershipUpsellShownAt||(l.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:k}),O())}),[x]);var I=(0,u.useMutation)(c,{optimisticResponse:{userUpdatePostSubscribeMembershipUpsellShownAt:{__typename:"User",id:(null==_?void 0:_.id)||"",postSubscribeMembershipUpsellShownAt:(new Date).getTime()}}}),O=o()(I,1)[0];return C?a.createElement(E.cW,{source:{name:k}},a.createElement(p.v,{isVisible:t,hide:r,withCloseButton:!0,withAnimation:!0,buttonStyle:"STRONG",buttonSize:"REGULAR",cancelText:"Not now",confirmText:"Become a member",onConfirm:function(){var e,t;l.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:null===(e=n.newsletterV3)||void 0===e?void 0:e.id,source:k}),t=(0,y.Rk)((0,V.c5p)(i),{subscribeToUserId:n.id,source:k}),window.location.href=t},showCancelButton:!0,isDestructiveAction:!1},a.createElement(v.x,{marginBottom:"24px"},a.createElement(b.z,{miroId:n.imageId||S.gG,alt:n.name||"",diameter:80,freezeGifs:!1})),a.createElement(v.x,{marginBottom:{xs:"8px",sm:"8px",md:"16px",lg:"16px",xl:"16px"}},a.createElement(f.F1,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},"You’re subscribed to get email updates. Become a member for more.")),a.createElement(v.x,{marginBottom:"32px"},a.createElement(w.F,{tag:"span",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER"},"Your membership fee directly supports ",n.name," and other writers you read. Get full access to every story on Medium.")))):null},x=t(76107),C=t(77280),I=t(61279),O=t(98863),N=t(26350),M=t(43822),P=t(62685),T=t(47230),U=t(73917),F=t(26244),R=t(1383),L=t(14646),B=t(31889),D=t(34135),A=t(97217),j=t(78285);function $(){return($=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var z=a.createElement("path",{d:"M14 7.29L15.6 9 18 6",strokeLinecap:"round",strokeLinejoin:"round"}),G=a.createElement("path",{d:"M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21",strokeLinecap:"round"}),W=a.createElement("path",{d:"M6 8.44l5.27 3.87 1.4-1.06.7-.52",strokeLinecap:"round"});const Y=function(e){return a.createElement("svg",$({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),z,G,W)};function H(){return(H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var Q=a.createElement("path",{d:"M24 13l2 2 3-3.5",strokeLinecap:"round",strokeLinejoin:"round"}),q=a.createElement("path",{d:"M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5",strokeLinecap:"round"}),J=a.createElement("path",{d:"M11.5 14.5L19 20l4-3",strokeLinecap:"round"});const K=function(e){return a.createElement("svg",H({width:38,height:38,viewBox:"0 0 38 38",fill:"none"},e),Q,q,J)};function X(){return(X=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var Z=a.createElement("path",{strokeLinecap:"round",d:"M14.58 6.89h3.92M16.39 9V5.08M11.62 7.04H7a1 1 0 0 0-1 1v7.13a1 1 0 0 0 1 1h8.54a1 1 0 0 0 1-1v-3.21"}),ee=a.createElement("path",{d:"M6 8.44l5.27 3.87 2.81-2.11",strokeLinecap:"round"});const ne=function(e){return a.createElement("svg",X({width:23,height:23,viewBox:"0 0 23 23",fill:"none"},e),Z,ee)};var te=t(14856),re=t(68894);function ie(){var e=i()(["\n  fragment UserSubscribeButton_user on User {\n    id\n    isPartnerProgramEnrolled\n    name\n    viewerEdge {\n      id\n      isFollowing\n      isUser\n    }\n    viewerIsUser\n    newsletterV3 {\n      id\n      ...useNewsletterV3Subscription_newsletterV3\n    }\n    ...useNewsletterV3Subscription_user\n    ...MembershipUpsellModal_user\n  }\n  ","\n  ","\n  ","\n"]);return ie=function(){return e},e}var le=function(e){var n=e.user,t=e.showFirstUseToolTip,r=void 0!==t&&t,i=e.showMembershipUpsellModal,l=void 0!==i&&i,s=e.showPostFollowSubscribeTooltip,u=void 0!==s&&s,c=e.hidePostFollowSubscribeTooltip,b=void 0===c?function(){}:c,p=e.isVisible,f=void 0===p||p,S=e.isCompact,k=void 0!==S&&S,x=a.useRef(null),$=(0,L.I)(),z=(0,B.F)(),G=(0,m.H)().value,W=(0,re.O)(!1),H=o()(W,3),Q=H[0],q=H[1],J=H[2],X=n.newsletterV3,Z=(0,j.w)(),ee=(0,g.Av)(),ie=(0,E.pK)(),le=(0,E.Qi)(),oe=(0,C.PM)(),se=(0,I.oT)({newsletterV3:X,creator:n,newsletterName:n.name||void 0}),ae=se.isSubscribed,ue=se.hasError,ce=se.loading,de=se.setSubscribe,me=A.T3.WRITER_SUBSCRIPTIONS_TOOLTIP,be=!(null==G||!G.dismissableFlags.includes(me)),pe=!!(0,d.VB)({name:"enable_referred_memberships",placeholder:!1}),ve=(0,h.v9)((function(e){return e.config.authDomain})),fe=(0,y.Rk)((0,V.c5p)(ve),{subscribeToUserId:n.id,source:le}),we=!(null==G||!G.mediumMemberAt),ge=a.useState(!1),Ee=o()(ge,2),he=Ee[0],Se=Ee[1],ye=a.useState(!1),Ve=o()(ye,2),ke=Ve[0],_e=Ve[1],xe=!be&&r&&!!G&&!ae,Ce=(0,E.P7)(oe||"").susiEntry,Ie=void 0===Ce?"":Ce,Oe=["newsletter_v3_promo","writer_subscription_landing"].includes(Ie),Ne=["newsletter_v3_promo"].includes(Ie),Me=!1,Pe=function(){var e;!Me&&f&&Te()&&(ee.event("newsletterV3.subscribePresented",{newsletterV3Id:(null===(e=n.newsletterV3)||void 0===e?void 0:e.id)||"",source:ie}),Me=!0)},Te=function(){var e;if(!x.current)return!1;var n=null===(e=x.current)||void 0===e?void 0:e.getBoundingClientRect(),t=n.top+n.height/2;return t>=0&&t<=window.innerHeight};a.useEffect((function(){return Pe(),window&&D.V6.on("scroll",Pe),function(){D.V6.off("scroll",Pe)}}),[]),a.useEffect((function(){Pe()}),[f]);var Ue=(0,re.O)(!1),Fe=o()(Ue,3),Re=Fe[0],Le=Fe[1],Be=Fe[2],De=function(e,n){var t=(0,m.H)(),r=t.value,i=t.loading,l=a.useRef(null),o=!!(0,d.VB)({name:"enable_referred_memberships",placeholder:!1}),s=!(null==r||!r.mediumMemberAt),u=(0,C.PM)(),c=(0,E.P7)(u||"").susiEntry,b=["newsletter_v3_promo","writer_subscription_landing","subscribe_user"].includes(void 0===c?"":c);if(i)return!1;if(null!==l.current)return l.current;var p=o&&b&&!s&&!e.viewerEdge.isUser&&!!e.isPartnerProgramEnrolled&&!(null!=r&&r.postSubscribeMembershipUpsellShownAt);return l.current=p,p}(n),Ae=a.useState(!1),je=o()(Ae,2),$e=je[0],ze=je[1];a.useEffect((function(){l&&ae&&!$e&&De?Le():Be()}),[ae,$e,De]),a.useEffect((function(){oe&&!De&&Oe&&ae&&(!Ne&&le===Ie||Ne)&&Z({duration:"NEXTPAGE",toastStyle:"NEWSLETTER_SUBSCRIBE",extraParams:{newsletterName:n.name,newsletterType:A.Rr.NEWSLETTER_TYPE_AUTHOR,unsubscribeFn:function(){return de(!1)}}})}),[oe,ae]),a.useEffect((function(){if(ae&&ke&&X){var e=pe&&!we&&!!n.isPartnerProgramEnrolled;e&&ee.event("newsletterV3.postSubscribeMembershipUpsellViewed",{newsletterV3Id:X.id,source:le}),Se(e),_e(!1)}}),[ae,ke,X]);var Ge=(0,O.f)().isWorkingPreview;if(ue||n.viewerEdge.isUser&&!Ge)return null;var We,Ye=ae?"OBVIOUS":"STRONG",He=function(e,n){return function(t){return{stroke:n?t.baseColor.background.normal:e,height:k?"23px":"36px",width:k?"23px":"36px"}}},Qe=$(He(z.accentColor.fill.normal,ce)),qe=$(He(z.accentColor.background,ce));We=ae?k?a.createElement(Y,{className:Qe}):a.createElement(K,{className:Qe}):k?a.createElement(ne,{className:qe}):a.createElement(te.Z,{className:qe});var Je=a.createElement(T.z,{loading:ce,buttonStyle:Ye,onClick:function(){var e;_e(!ae),G?ae?de(!1):G&&G.allowEmailAddressSharingEditorWriter?de(!0,!1):q():null!==(e=n.newsletterV3)&&void 0!==e&&e.id?ee.event("newsletterV3.subscribeClicked",{newsletterV3Id:n.newsletterV3.id,source:le}):ee.event("user.LOSubscribeClicked",{targetUserId:n.id,source:le})},padding:"0","aria-label":"Subscribe"},We),Ke=function(){return a.createElement(v.x,{padding:"14px 12px 20px",maxWidth:"220px"},a.createElement(w.F,{tag:"div",scale:"S",color:"DARKER"},a.createElement("strong",null,"You're subscribed to ",n.name,". Become a member for more.")," Get full access to every story on Medium for $5 a month."),a.createElement(v.x,{paddingTop:"8px"},a.createElement(M.a,{isButton:!0,buttonStyle:"STRONG",buttonSize:"SMALL",redirectUrl:fe,width:"150px",onClick:function(){ee.event("newsletterV3.postSubscribeMembershipUpsellClicked",{newsletterV3Id:X.id,source:le})}},a.createElement(v.x,{textAlign:"center"},a.createElement(w.F,{scale:"S",color:"WHITE"},"Become a member")))))},Xe=function(){return a.createElement(v.x,{padding:"10px 12px",maxWidth:"166px"},a.createElement(w.F,{tag:"div",scale:"S",color:"DARKER"},"Subscribe to get an email whenever ",n.name," publishes."))},Ze=function(e){var n=e.children;return a.createElement(U.J,{isVisible:!!b&&!ae,hide:b,placement:"bottom",popoverRenderFn:Xe,targetDistance:10,role:"tooltip"},n)},en=function(e){var n=e.children;return a.createElement(U.J,{isVisible:!ce&&he,hide:function(){return Se(!1)},placement:"bottom",popoverRenderFn:Ke,targetDistance:10,role:"tooltip"},n)},nn=function(e){var n=e.children;return a.createElement(F.$,{isVisible:!ce&&!ae,hideOnClick:!0,noPortal:!0,mouseEnterDelay:500,mouseLeaveDelay:0,placement:"bottom",popoverRenderFn:Xe,role:"tooltip",targetDistance:10},n)},tn=function(e){var n=e.children;return a.createElement(P.o,{isVisible:!ce,flag:me,targetDistance:10,text:"You can now subscribe to get stories delivered directly to your inbox.",darkTheme:!0},n)},rn=function(e){var n=e.children;return xe?a.createElement(tn,null,n):u&&!ae?a.createElement(Ze,null,n):he?a.createElement(en,null,n):a.createElement(nn,null,n)};return a.createElement("div",{ref:x},a.createElement(rn,null,a.createElement(v.x,null,G&&a.createElement(R.Q,{onConfirm:function(){de(!0,!0)},isVisible:Q,hide:J,titleText:"Confirm your subscription to ".concat(n.name),confirmText:"Confirm now",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!1,withCloseButton:!1,isDestructiveAction:!1},"When you subscribe to a writer or publication, your email address will be shared with them so they can stay in contact with you outside of Medium. Opt out any time by unsubscribing in Settings."),G?Je:a.createElement(N.R9,{operation:"register",newsletterV3:X,user:n,actionUrl:X?(0,V.Zul)(X.id):(0,V.lcz)(n.id),susiEntry:"subscribe_user"},Je))),Re&&a.createElement(_,{user:n,isVisible:Re,hide:function(){ze(!0),Be()}}))},oe=(0,s.Ps)(ie(),I.DI,I.nj,x.b)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/33928.8ae59af2.chunk.js.map