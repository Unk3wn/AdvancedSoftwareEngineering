<!DOCTYPE html>
<!-- saved from url=(0059)https://thevaluable.dev/dry-principle-cost-benefit-example/ -->
<html lang="en-us" data-theme="null"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="x-ua-compatible" content="IE=edge"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://thevaluable.dev/images/2018/02/repeat-yourself.jpg"><meta name="twitter:title" content="The DRY Principle: Benefits and Costs with Examples"><meta name="twitter:description" content="What are the benefits and drawbacks of the DRY principle?"><meta name="twitter:site" content="@Cneude_Matthieu"><meta property="og:title" content="The DRY Principle: Benefits and Costs with Examples"><meta property="og:site_name" content="The Valuable Dev"><meta property="og:url" content="https://thevaluable.dev/dry-principle-cost-benefit-example/"><meta property="og:description" content="What are the benefits and drawbacks of the DRY principle?"><meta property="og:type" content="article"><meta property="article:published_time" content="2018-01-29T05:47:53Z"><meta property="article:tag" content="Fundamentals"><meta property="article:tag" content="PHP"><title>The DRY Principle: Benefits and Costs with Examples</title><meta name="description" content="What are the benefits and drawbacks of the DRY principle?"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="https://thevaluable.dev/images/favicon.png"><link rel="apple-touch-icon" href="https://thevaluable.dev/images/apple-touch-icon.png"><link rel="preconnect" href="https://fonts.gstatic.com/"><link href="./The DRY Principle_ Benefits and Costs with Examples_files/css2" rel="stylesheet" type="text/css" “media="print" onload="this.onload=null;this.media=&#39;all&#39;" media="all"><link rel="stylesheet" class="light-theme" href="./The DRY Principle_ Benefits and Costs with Examples_files/screen.min.ba7a835ae646e96de043fb214a0f1fd92740c7a8ea848d5903497410f1ca5572.css" integrity="sha256-unqDWuZG6W3gQ/shSg8f2SdAx6jqhI1ZA0l0EPHKVXI="><link rel="stylesheet" class="light-theme" href="./The DRY Principle_ Benefits and Costs with Examples_files/footer.min.cb248a13bec4075736e2832c8386e9b967caafd6d7d01f1edf768d62354c4398.css" integrity="sha256-yySKE77EB1c24oMsg4bpuWfKr9bX0B8e33aNYjVMQ5g=" media="screen" onload="this.media=&#39;screen&#39;;"><link href="https://thevaluable.dev/index.xml" rel="alternate" type="application/rss+xml" title="The Valuable Dev"><meta name="generator" content="Hugo 0.74.1"><link rel="canonical" href="https://thevaluable.dev/dry-principle-cost-benefit-example/"><script async="" src="./The DRY Principle_ Benefits and Costs with Examples_files/analytics.js.Download"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","image":"https:\/\/thevaluable.dev\/images\/2018\/02\/repeat-yourself.jpg","publisher":{"@type":"Organization","name":"Matthieu Cneude","logo":{"type":"ImageObject","url":"https:\/\/thevaluable.dev\/images\/author.jpg"}},"author":{"@type":"Person","name":"Matthieu Cneude"},"headline":"The DRY Principle: Benefits and Costs with Examples","name":"The DRY Principle: Benefits and Costs with Examples","wordCount":2280,"timeRequired":"PT11M","inLanguage":{"@type":"Language","alternateName":"en"},"url":"https:\/\/thevaluable.dev\/dry-principle-cost-benefit-example\/","datePublished":"2018-01-29T05:47Z","dateModified":"2021-08-09T00:00Z","keywords":"Fundamentals, PHP","description":"What are the benefits and drawbacks of the DRY principle?","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/thevaluable.dev\/dry-principle-cost-benefit-example\/"}}</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-46898153-4','auto');ga('set','anonymizeIp',true);ga('send','pageview');</script></head><body class="nav-closed"><div class="nav"><h3 class="nav-title nav-main-title">Menu</h3><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#" class="nav-close"><i class="la la-times-circle"></i></a><ul><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/">Home</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/post/">All Articles</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/page/newsletter/">Let's Connect</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/page/books/">Books</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/page/support/">Support</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/page/about">About</a></li><hr class="separation"><h3 class="nav-title nav-sub">Categories</h3><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/complexity">Complexity</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/fundamentals">Fundamentals</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/mouseless">Mouseless</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/vim">Vim</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/soft-skills">Soft Skills</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/learning">Learning</a></li><li class="nav-opened" role="presentation"><a href="https://thevaluable.dev/tags/side-project">Side Projects</a></li></ul><a class="subscribe-button" href="https://thevaluable.dev/index.xml"><i class="la la-feed"></i>&nbsp;&nbsp;RSS</a></div><span class="nav-cover"></span><div class="site-wrapper"><aside class="table-of-content tob-closed"><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#" class="tob-close"><span class="hidden">Close</span></a><nav id="TableOfContents"><ul><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#dry-is-about-duplication-of-knowledge">DRY is About Duplication of Knowledge</a></li><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#dry-and-code-duplication">DRY and Code Duplication</a></li><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#dry-everything-the-recipe-for-disasters">DRY Everything: the Recipe for Disasters</a><ul><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#dangerous-generalities">Dangerous Generalities</a></li><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#premature-refactoring">Premature Refactoring</a></li><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#similar-domain-knowledge-">Similar Domain Knowledge… ?</a></li></ul></li><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#dry-is-not-only-about-code">DRY Is Not Only About Code</a></li><li><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#applying-dry-depending-on-the-context">Applying DRY Depending On The Context</a></li></ul></nav></aside><span class="table-of-content-cover"></span><header class="main-header post-head no-cover"><a class="blog-title" href="https://thevaluable.dev/">The Valuable Dev</a><ul class="header-menu"><li><a href="https://thevaluable.dev/page/newsletter"><i class="la la-envelope"></i><span class="text">Let's Connect</span></a></li><li><a href="https://thevaluable.dev/page/books"><i class="la la-book"></i><span class="text">Books</span></a></li><li><a href="https://thevaluable.dev/page/support"><i class="la la-heart-o"></i><span class="text">Support</span></a></li><li><a href="https://thevaluable.dev/page/about"><i class="la la-grin-wink"></i><span class="text">About</span></a></li></ul><nav class="page-nav clearfix"><a class="menu-button" href="https://thevaluable.dev/dry-principle-cost-benefit-example/#">☰&nbsp;&nbsp;Menu</a>
<a id="light-button" class="light-button icon-button" href="https://thevaluable.dev/dry-principle-cost-benefit-example/#"><i class="la la-moon-o"></i></a><a class="tob-button icon-button" href="https://thevaluable.dev/dry-principle-cost-benefit-example/#"><i class="la la-list"></i></a><a class="toggle-search icon-button" title="search"><i class="la la-search"></i></a></nav></header><aside role="search"><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/#" class="close toggle-search"><i class="la la-times-circle"></i></a><div class="search-wrapper"><form class="search" method="get"><input type="search" placeholder="search..."></form></div><div class="search-results list"></div></aside><main class="content" role="main"><article class="post post"><header class="post-header"><section class="post-meta"><div class="li-date"><time class="post-date" datetime="2018-01-29T05:47:53Z">29 Jan 2018</time>
<span class="time-update">, updated</span>
<time class="post-date time-update" datetime="2021-08-09T00:00:00Z">9 Aug 2021</time>
<a class="la la-twitter" style="font-size:1.4em" href="https://twitter.com/share?text=The%20DRY%20Principle%3a%20Benefits%20and%20Costs%20with%20Examples%C2%A0-%C2%A0The%20Valuable%20Dev&amp;url=https%3a%2f%2fthevaluable.dev%2fdry-principle-cost-benefit-example%2f" onclick="window.open(this.href,&#39;twitter-share&#39;,&#39;width=550,height=235&#39;);return false;"><span class="hidden">Twitter</span></a></div><span class="post-tag small"><a href="https://thevaluable.dev/tags/fundamentals/">#Fundamentals</a></span>
<span class="post-tag small"><a href="https://thevaluable.dev/tags/php/">#PHP</a></span></section><h1 class="post-title">The DRY Principle: Benefits and Costs with Examples</h1></header><section class="post-content"><picture>
<source srcset="https://thevaluable.dev/images/2018/02/repeat-yourself.webp" type="image/webp"><img width="780" height="520" src="./The DRY Principle_ Benefits and Costs with Examples_files/repeat-yourself.jpg" alt="Don&#39;t DRY everything blindly"></picture><p>Once upon a time, a fearful young developer (me) wanted to write magnificent code. I was seeing generations of developers speaking about it, as we speak about pyramids two thousands years after their construction. I wanted to let my mark in the world!</p><p>Therefore, I did what I thought would be the best: avoiding every traps everybody felt into, by following the Holy Coding Principles, created by the Ones Who Have the Knowledge.</p><p>I followed them drastically. It was my religion, my cult, my way of life. After hearing about the DRY principle, my code became suddenly as DRY as the Sahara. I swear to the moon, the sky, and the twelve deities: Nothing will be repeated in my code! Ever!</p><p>This lead to many, many problems.</p><p>I understood that principles need to be well understood, by reading the books where they are defined, and not only random comment on stack overflow. I also understood that principles should be used <em>depending on the context</em>.</p><p>A little reminder for those in the back who don’t follow: the <strong>DRY principle</strong> means “Don’t Repeat Yourself” and was first introduced in the book <a href="https://www.goodreads.com/book/show/4099.The_Pragmatic_Programmer" target="_blank" rel="noopener">The Pragmatic Programmer</a>. The principle itself was known and applied before this book came to life; but the Pragmatic Programmer defined it precisely and coined its name.</p><p>Without waiting more, let’s dive into the wonderful lands of DRY! If you feel you want to burn this article or to cover it with praise, fill free to leave a lot of comments to increase my glory.</p><h2 id="dry-is-about-duplication-of-knowledge">DRY is About Duplication of Knowledge</h2><p>Even if the phrase <strong>Don’t Repeat Yourself</strong> sounds simple enough, it also sounds a too generic. In The Pragmatic Programmer, DRY is defined as</p><blockquote><p>Every piece of knowledge must have a single, unambiguous, authoritative representation within a system.</p></blockquote><p>It begs the question: what’s a <em>piece of knowledge</em>? I would define it either as:</p><ul><li>A precise functionality in the business domain of your application.</li><li>An <a href="https://en.wikipedia.org/wiki/Algorithm" target="_blank" rel="noopener">algorithm</a>.</li></ul><p>To take an overly used e-commerce examples, a <code>shipment</code> class and its behavior would be part of the <em>business domain</em> of your application. A shipment is something real your company uses to send products to their customers.</p><p>Therefore, the logic of this <code>shipment</code> should only appear once in the application. Why?</p><p>Imagine that you need to send shipments to a warehouse. You need to trigger this behavior in 76 different places in your application. No problem: you repeat the logic 76 times.</p><p>After a while, your boss comes to you and asks you to change this behavior. Instead of sending shipments to one warehouse, you need to send them to three different ones.</p><p>The result? You’ll spend a lot of time on your shipment logic, since you’ll have to change it in 76 different places! This is a waste of time, and a good way to produce bugs to piss your boss off.</p><p>The solution: create a single representation of your <em>knowledge</em>. Put the logic to send the shipment in one place and then use the <em>representation of this knowledge</em> anywhere you need it. For example, sending a shipment could be a method of the class <code>Shipment</code> you can reuse everywhere you manipulate a bunch of these shipments. Congratulations! You’ve created a new <a href="https://thevaluable.dev/abstraction-type-software-example/">abstraction</a>.</p><p>Let’s take another example. Imagine that you coded a fancy class to parse <a href="https://en.wikipedia.org/wiki/B-tree" target="_blank" rel="noopener">B-trees</a>. This can also be considered as <em>knowledge</em>: it’s an algorithm which should be defined once. The representation of that knowledge should be used everywhere without repeating the knowledge itself.</p><h2 id="dry-and-code-duplication">DRY and Code Duplication</h2><p>So DRY is all about knowledge? All about business logic?</p><p>Let’s look at some code snippets to understand why:</p><div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">interface</span> <span class="nx">Product</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">displayPrice</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">PlasticDuck</span> <span class="k">implements</span> <span class="nx">Product</span>
<span class="p">{</span>
    <span class="sd">/** @var int */</span>
    <span class="k">private</span> <span class="nv">$price</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">int</span> <span class="nv">$price</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span> <span class="o">=</span> <span class="nv">$price</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">displayPrice</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">echo</span> <span class="nx">sprintf</span><span class="p">(</span><span class="s2">"The price of this plastic duck is %d euros!"</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">price</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$plasticDuck</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PlasticDuck</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="nv">$plasticDuck</span><span class="o">-&gt;</span><span class="na">displayPrice</span><span class="p">();</span>
</code></pre></div><p>This code doesn’t look that bad, does it?</p><p>Dave, your colleague developer, thinks it’s horrible. After looking at this code you’ve written, he comes at your desk to scream:</p><ol><li>The word <code>price</code> is repeated 6 times!</li><li>The method <code>displayPrice()</code> is repeated in the interface and its implementation!</li></ol><p>Your answer is swift:</p><ol><li>Variables (and properties) like <code>price</code> need to be repeated in your code. It’s not a functionality.</li><li>The <em>knowledge</em> (displaying the price) is only present once, in the method itself.</li></ol><p>No DRY violation here.</p><p>Dave is speechless, feeling your powerful aura illuminating the whole room.</p><p>But you attacked Dave’s expertise: he’s angry. He wants to <a href="https://thevaluable.dev/guide-debate-software-developer/">win the argument</a>. Soon enough, he finds another piece of code you’ve written; he comes back to your desk, slapping it in your face:</p><div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">CsvValidation</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">validateProduct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$product</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$product</span><span class="p">[</span><span class="s1">'color'</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s1">'Import fail: the product attribute color is missing'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$product</span><span class="p">[</span><span class="s1">'size'</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s1">'Import fail: the product attribute size is missing'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$product</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s1">'Import fail: the product attribute type is missing'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>Dave, full of himself, claims: “You little pig! This code is not DRY!”. And you, aware of what the DRY principle is really about, answer: “But the business logic, the knowledge, is <em>still</em> not repeated!”.</p><p>Again, you’re right. The method validates some CSV output in only one place (<code>validateProduct()</code>). This is the knowledge, and it’s not repeated.</p><p>But Dave is not ready to accept it! “What about all those conditionals everywhere? Those <code>if</code>? Isn’t it an obvious violation of the DRY principle?”</p><p>You take a deep voice to answer, pronouncing every word perfectly, your knowledge bouncing on the wall to create an infinite echo of awareness:</p><p>“Well… no. It’s not. I would call that unnecessary <strong>code duplication</strong>, but not a violation of the DRY principle”.</p><p>Suddenly, your fingers type on your keyboard, at the speed of light, the following code:</p><div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">CsvValidation</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$productAttributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">'color'</span><span class="p">,</span>
        <span class="s1">'size'</span><span class="p">,</span>
        <span class="s1">'type'</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">validateProduct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$product</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">productAttributes</span> <span class="k">as</span> <span class="nv">$attribute</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$product</span><span class="p">[</span><span class="nv">$attribute</span><span class="p">]))</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="nx">sprintf</span><span class="p">(</span><span class="s1">'Import fail: the product attribute %s is missing'</span><span class="p">,</span> <span class="nv">$attribute</span><span class="p">));</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><p>It looks better, does it? There’s no code duplication anymore!</p><p>To summarize:</p><ol><li><strong>Knowledge duplication</strong> is always a DRY principle violation.</li><li><strong>Code duplication</strong> doesn’t necessarily violate the DRY principle.</li></ol><p>Dave is still not convinced. With a serenity defying the highest spiritual masters through the ages, you give the final stroke. You take a book on your desk and read the following:</p><blockquote><p>Many people took it [the DRY principle] to refer to code only: they thought that DRY means “don’t copy-and-paste lines of source.” […] DRY is about the duplication of knowledge, of intent. It’s about expressing the same thing in two different places, possibly in two totally different ways.</p></blockquote><p>This is from the <a href="https://media.pragprog.com/titles/tpp20/dry.pdf" target="_blank" rel="noopener">20th anniversary edition of the Pragmatic Programmer</a>, the same book which coined the DRY principle.</p><h2 id="dry-everything-the-recipe-for-disasters">DRY Everything: the Recipe for Disasters</h2><h3 id="dangerous-generalities">Dangerous Generalities</h3><p>Let’s take a more interesting example. Something which happened in the Real Life™.</p><p>I was working on an application for filmmakers. They could upload their movies and their metadata (title, description, cast and crew…) using the app’s user interface. This information was displayed on a <a href="https://en.wikipedia.org/wiki/Video_on_demand" target="_blank" rel="noopener">VOD platform</a>.</p><p>The architecture of the app was inspired from the <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller" target="_blank" rel="noopener">MVC pattern</a> and looked like this:</p><p><img src="./The DRY Principle_ Benefits and Costs with Examples_files/screenshot-20180219-065240.png" alt="basic project filetree"></p><p>The content team of the company could also use this application. They could create the movie’s metadata when the filmmakers didn’t want to do it themselves.</p><p>The filmmakers and the content team had different needs. The content team is used to work with content management systems, the filmmakers are not. Therefore, we decided to create two interfaces:</p><ul><li>The first one for the content team, without guidance or explanation, where you can enter the content as fast as possible.</li><li>Another one for the filmmakers, with a more friendly user experience.</li></ul><p>Here’s what we did:</p><p><img src="./The DRY Principle_ Benefits and Costs with Examples_files/screenshot-20180207-070002.png" alt="basic project filetree"></p><p>The controllers from the two different applications are <strong>almost</strong> the same. It’s not only about their names: their implementations, too. We basically copy-pasted them.</p><p>This looks like an obvious and ugly violation of the DRY principle: views and controller repeated all over the place! We could have created an <a href="https://thevaluable.dev/abstraction-software-development/">abstraction</a> to group the common logic, like an abstract class for example. But this would have <strong>coupled</strong> the controllers of the two different applications together.</p><p>Change the abstract class and every single of your controllers need to support the change without breaking.</p><p>In many cases, we knew that the interface would <em>evolve</em> differently in the future. We would have created a lot of conditionals in the controllers’ actions if we would have created one set of controller for both applications. Nobody wants a forest of if statements; the resulting code would have been way more <a href="https://thevaluable.dev/kiss-principle-explained/">complex</a>.</p><p>Additionally, the controllers shouldn’t contain any business logic. If you recall the definition of the DRY principle, it’s this <em>knowledge</em>, this <em>business logic</em> which should not be duplicated.</p><p>In short, trying to apply DRY everywhere can have two results:</p><ol><li>Unnecessary <strong>coupling</strong></li><li>Unnecessary <strong>complexity</strong></li></ol><p>You don’t want any of these in your application.</p><h3 id="premature-refactoring">Premature Refactoring</h3><p>You shouldn’t apply the DRY principle if your business logic doesn’t have any duplication <em>yet</em>. Again, it depends of the context, but, as a rule of thumb, trying to apply DRY to something which is only used in one place can lead to premature generalization.</p><p>If you begin to generalize something because “it could be useful later”, please don’t. Why?</p><ol><li>You will spend time to create abstractions (abstract classes and whatnot) which might be only used in one place, forever. Business needs can change very quickly and drastically: today, everybody will tell you that you need some generalization “for the future”, and tomorrow, everybody will forget about it.</li><li>Again, you will possibly introduce <strong>complexity</strong> and <strong>coupling</strong> in your code for zero benefit.</li></ol><p><em>Code reuse</em> and <em>code duplication</em> are two different things. DRY states that you shouldn’t duplicate knowledge, not that you should use abstractions to reuse everything, everywhere.</p><p>This is what I learned over the years: code for the specific at the beginning, and don’t try to generalize. Even if your managers would love to have 90% of your application reusable for every single use case. In practice, this is almost never possible.</p><p>Two functionalities, even if they look very similar at first glance, can become very different in the future. If you have any doubt, it’s better to copy your code and let it takes different path.</p><p><a href="https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction" target="_blank" rel="noopener">Sandy Metz</a> said it better than me:</p><blockquote><p>Duplication is far cheaper than the wrong abstraction.</p></blockquote><p>Code first, make it work, and then keep in mind all these principles you know to refactor after, and only if you need it.</p><p>DRY principle violations should be handled when the knowledge is already and obviously duplicated.</p><h3 id="similar-domain-knowledge-">Similar Domain Knowledge… ?</h3><p>I’ve written above that repetition of <em>knowledge</em> is always a violation of the DRY principle. This only apply when the <strong>same</strong> knowledge is repeated. Let’s take an example:</p><div class="highlight"><pre class="chroma"><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>


<span class="sd">/** Shipment from the warehouse to the customer */</span>
<span class="k">class</span> <span class="nc">Shipment</span>
<span class="p">{</span>
     <span class="k">public</span> <span class="nv">$deliveryTime</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">//in days
</span><span class="c1"></span>
     <span class="k">public</span> <span class="k">function</span> <span class="nf">calculateDeliveryDay</span><span class="p">()</span><span class="o">:</span> <span class="nx">DateTime</span>
     <span class="p">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nx">\DateTime</span><span class="p">(</span><span class="s2">"now +</span><span class="si">{</span>$this-&gt;deliveryTime<span class="si">}</span><span class="s2"> day"</span><span class="p">);</span>
     <span class="p">}</span>
<span class="p">}</span>

<span class="sd">/** Order return of a customer */</span>
<span class="k">class</span> <span class="nc">OrderReturn</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$returnLimit</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">//in days
</span><span class="c1"></span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">calculateLastReturnDay</span><span class="p">()</span><span class="o">:</span> <span class="nx">DateTime</span>
    <span class="p">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nx">\DateTime</span><span class="p">(</span><span class="s2">"now +</span><span class="si">{</span>$this-&gt;returnLimit<span class="si">}</span><span class="s2"> day"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>You can hear Dave, your colleague developer, gently screaming in your ears once again: “This is an obvious violation of everything I believe in! What about the DRY principle? My heart is bleeding!”.</p><p>However, Dave is again wrong. From an e-commerce perspective, the delivery time of a shipment to a customer (<code>Shipment::calculateDeliveryDay()</code>) has nothing to do with the last day the customer can return his ordered products (<code>Return::calculateLastReturnDay</code>). What appears to be a duplication of knowledge is just a pure coincidence.</p><p>What happens if you combine those two methods in one? If your company decide that the customer has now one month to return his products, you will have to split the method again. If you don’t, the shipment delivery will take one month too!</p><p>This is not the best way to please the customers.</p><h2 id="dry-is-not-only-about-code">DRY Is Not Only About Code</h2><p><picture>
<source srcset="https://thevaluable.dev/images/2018/02/dry_gin-1.webp" type="image/webp"><img width="780" height="520" src="./The DRY Principle_ Benefits and Costs with Examples_files/dry_gin-1.jpg" alt="even the Gin can be DRY!"></picture>
<em>Even the Gin can be DRY nowadays!</em></p><p>DRY is not something you should only respect in your code. You shouldn’t repeat the knowledge of your business domain in anything related to your project.</p><p>To quote Dave Thomas again:</p><blockquote><p>A system’s knowledge is far broader than just its code. It refers to database schemas, test plans, the build system, even documentation.</p></blockquote><p>The idea of DRY is simple in theory: you shouldn’t need to update in parallel multiple things when one change occurs. If your knowledge is repeated two times in your code and you need to change it, you might forget to change it everywhere. In your documentation, it could lead to misconceptions, confusion, and ultimately wrong implementations.</p><h2 id="applying-dry-depending-on-the-context">Applying DRY Depending On The Context</h2><p>At the beginning of my career, I was often victim of <a href="https://en.wikipedia.org/wiki/Analysis_paralysis" target="_blank" rel="noopener">analysis paralysis</a>. All those principles where holding me back to be productive and efficient. It was too complex and I didn’t want to screw everything.</p><p>However, <strong>principles are not rules you must follow</strong>. They are tools for you to go in the good direction. It’s your job to adapt them depending on the situation.</p><p>Most good principles are, in fact, trade-offs: when you apply the DRY principle, you make your code easier to understand, but the <a href="https://thevaluable.dev/global-variable-explained/">scope of your changes</a> becomes wider.</p><div class="related-sources"><div class="h2">Related Sources</div><ul><li><a href="https://www.goodreads.com/book/show/4099.The_Pragmatic_Programmer" target="_blank" rel="noopener">The Pragmatic Programmer: From Journeyman to Master</a> - Andy Hunt / Dave Thomas</li><li><a href="http://verraes.net/2014/08/dry-is-about-knowledge/" target="_blank" rel="noopener">DRY is About Knowledge</a> - Matthias Verraes</li><li><a href="http://wiki.c2.com/?DontRepeat" target="_blank" rel="noopener">Don’t Repeat Yourself</a> - wiki.c2.com</li><li><a href="https://www.sandimetz.com/blog/2016/1/20/the-wrong-abstraction" target="_blank" rel="noopener">The Wrong Abstraction</a> - Sandi Metz</li><li><a href="https://blog.ndepend.com/code-reuse-not-good-goal/" target="_blank" rel="noopener">Code Reuse is Not a Good Goal</a> - Erik Dietrich</li><li><a href="http://wiki.c2.com/?PrematureGeneralization" target="_blank" rel="noopener">Premature Generalization</a> - wiki.c2.com</li></ul></div></section><footer class="post-footer"><section class="newsletter"><form action="https://buttondown.email/api/emails/embed-subscribe/thevaluabledev" method="post" target="popupwindow" onsubmit="window.open(&#39;https://buttondown.email/thevaluabledev&#39;,&#39;popupwindow&#39;)" class="embeddable-buttondown-form"><h3>Let's Connect</h3><p><label for="bd-email">You'll receive <b>each month</b> the last article with additional resources and updates.</label></p><input type="email" name="email" placeholder="your-email@example.com" id="bd-email">
<input type="hidden" value="1" name="embed">
<input type="submit" value="I want more!"><p><a target="_blank" title="Show me your newsletter!" href="https://buttondown.email/thevaluabledev/archive/the-valuable-dev-new-article-about-vim-and-many/">Here's how it looks</a></p><p>You can reply to any email if you have questions, problems, or feedback. I'll write back as soon as I can.</p></form></section><div class="h3 remark42">Share Your Knowledge</div><div id="remark42"></div><script>var remark_config={host:"https:\/\/remark42.thevaluable.dev",site_id:'jadzD9w1sijz',components:['embed'],max_shown_comments:10};var buttons=document.getElementsByClassName("light-button");for(var i=0;i<buttons.length;i++){buttons[i].addEventListener('click',()=>{let theme=window.localStorage.getItem('theme');if(theme==null||theme=='light'){if(window.REMARK42!=undefined){window.REMARK42.changeTheme('dark');}}
if(theme=='dark'){if(window.REMARK42!=undefined){window.REMARK42.changeTheme('light');}}});}
(function(c){for(var i=0;i<c.length;i++){var d=document,s=d.createElement('script');s.src=remark_config.host+'/web/'+c[i]+'.js';s.defer=true;window.addEventListener("scroll",function(){var theme=window.localStorage.getItem('theme');if(theme==null||theme=='light'){remark_config.theme='light'}else{remark_config.theme='dark'}
(d.head||d.body).appendChild(s);},{once:true});}})(remark_config.components||['embed']);</script></footer></article></main><aside class="read-next" id="read-next"><a class="read-next-story" style="background-image:url(/images/2018/01/php-7-2-traps.webp)" href="https://thevaluable.dev/php-7-2-pitfalls/"><section class="post"><h2>PHP 7.2: the Traps to Avoid for a Better and Cleaner Code</h2></section></a><a class="read-next-story prev" style="background-image:url(/images/2020/srp_revisited/coupling_vs_cohesion.webp)" href="https://thevaluable.dev/single-responsibility-principle-revisited/"><section class="post"><h2>The Single Responsibility Principle Revisited</h2></section></a></aside><footer class="site-footer"><section class="copyright"><a href="https://thevaluable.dev/dry-principle-cost-benefit-example/">The Valuable Dev</a> All right reserved - 2021</section><section class="social"><a class="bloglogo" href="https://thevaluable.dev/page/newsletter" target="_blank"><span class="la la-envelope"></span></a>&nbsp;
<a class="bloglogo" href="https://github.com/phantas0s" target="_blank"><span class="la la-github"></span></a>&nbsp;
<a class="bloglogo" href="https://youtube.com/channel/UCoJtk2M8bme9KXTe6F3K-Yg" target="_blank"><span class="la la-youtube"></span></a>&nbsp;
<a class="bloglogo" href="https://twitter.com/Cneude_Matthieu" target="_blank"><span class="la la-twitter"></span></a>&nbsp;
<a class="bloglogo" href="https://www.linkedin.com/in/matthieu-cneude-28038182" target="_blank"><span class="la la-linkedin"></span></a>&nbsp;
<a class="bloglogo" href="https://thevaluable.dev/index.xml" target="blank"><span class="la la-feed"></span></a></section><section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io/">HUGO</a></section></footer></div><link rel="stylesheet" href="./The DRY Principle_ Benefits and Costs with Examples_files/line-awesome.min.css" media="screen" onload="this.media=&#39;screen&#39;;"><script type="text/javascript" src="./The DRY Principle_ Benefits and Costs with Examples_files/app.86ee819e5e4937b13bc870860b60731404b6bb2a11f91c5b1c75617171f9ee6c.js.Download" integrity="sha256-hu6Bnl5JN7E7yHCGC2BzFAS2uyoR+RxbHHVhcXH57mw=" media="screen"></script></body></html>